<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Puerta Caribe - Carrito de compra.">
  <title>Carrito de Compra - Puerta Caribe</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- NAVBAR -->
  <header class="navbar">
    <div class="logo-container">
      <a href="landing.html">
        <div class="logo-icon"><img src="assets/logos/logosimple.png" alt="Puerta Caribe Logo" style="height: 100%; width: auto;"></div>
      </a>
    </div>

    <nav>
      <ul class="nav-links">
        <li><a href="descubre.html">Descubre Barranquilla</a></li>
        <li><a href="agenda.html">Agenda Cultural</a></li>
        <li><a href="servicios.html">Servicios Turísticos</a></li>
        <li><a href="sostenible.html">Turismo Sostenible</a></li>
        <li><a href="nosotros.html">Nosotros</a></li>
      </ul>
    </nav>

    <div class="navbar-actions">
      <a href="carrito.html" class="btn-cart active">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
      </a>
      <a href="perfil.html" class="btn-login">Iniciar sesión</a>
    </div>
  </header>

  <!-- HERO CARRITO -->
  <section class="page-hero">
    <div class="page-hero-content">
      <h1>CARRITO DE COMPRA</h1>
      <div class="breadcrumb">PUERTACARIBE > CARRITO</div>
    </div>
  </section>

  <!-- CONTENIDO CARRITO -->
  <section class="carrito-content">
    <div class="carrito-container">
      
      <!-- Columna izquierda -->
      <div class="carrito-main">
        
        <!-- Dirección de entrega -->
        <div class="carrito-section">
          <div class="carrito-section-header">
            <span class="section-title">DIRECCIÓN DE ENTREGA</span>
            <a href="#" class="section-action">CAMBIAR</a>
          </div>
          <div class="carrito-section-body">
            <p class="direccion-text" id="direccionEntrega">CLL X#XX-XX</p>
          </div>
        </div>

        <!-- Productos -->
        <div class="carrito-section">
          <div class="carrito-section-header">
            <span class="section-title">PRODUCTOS</span>
            <a href="#" class="section-action" id="productosCount">#PRODUCTOS ∨</a>
          </div>
          <div class="carrito-section-body">
            <div class="carrito-productos" id="listaProductos">
              <!-- Los productos se cargan dinámicamente -->
              <p class="carrito-vacio">No hay productos en el carrito</p>
            </div>
          </div>
        </div>

        <!-- Entrega estimada -->
        <div class="carrito-section carrito-row">
          <span class="section-label">ENTREGA ESTIMADA:</span>
          <span class="section-value" id="entregaEstimada">XX TIME</span>
        </div>

        <!-- Métodos de pago -->
        <div class="carrito-section">
          <div class="carrito-section-header">
            <span class="section-title">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="#00A8E8" stroke="none">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
              MÉTODOS DE PAGO
            </span>
          </div>
          <div class="carrito-section-body">
            <p class="metodos-label">MÉTODOS DISPONIBLES</p>
            
            <div class="metodo-pago">
              <span class="metodo-nombre">EFECTIVO</span>
              <label class="toggle-switch">
                <input type="radio" name="metodoPago" value="efectivo">
                <span class="toggle-slider"></span>
              </label>
            </div>
            
            <div class="metodo-pago">
              <span class="metodo-nombre">OTRO MÉTODO</span>
              <label class="toggle-switch">
                <input type="radio" name="metodoPago" value="otro">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="agregar-metodo">
              <span class="agregar-label">AGREGAR MÉTODO DE PAGO</span>
              <button class="btn-agregar-tarjeta">AGREGAR TARJETA DE CRÉDITO O DÉBITO</button>
            </div>
          </div>
        </div>

        <!-- Cupón -->
        <div class="carrito-section carrito-row">
          <span class="section-label">CUPÓN</span>
          <a href="#" class="section-action-blue" id="agregarCupon">+ AGREGAR</a>
        </div>

      </div>

      <!-- Columna derecha - Resumen -->
      <div class="carrito-sidebar">
        <div class="resumen-section">
          <div class="resumen-header">
            <span>RESUMEN</span>
            <span class="resumen-toggle">∨</span>
          </div>
          <div class="resumen-body" id="resumenBody">
            <!-- Detalles del resumen -->
            <div class="resumen-item">
              <span>Subtotal</span>
              <span id="subtotal">$0</span>
            </div>
            <div class="resumen-item">
              <span>Envío</span>
              <span id="envio">$0</span>
            </div>
            <div class="resumen-item resumen-total">
              <span>Total</span>
              <span id="total">$0</span>
            </div>
          </div>
        </div>

        <button class="btn-confirmar-pedido" id="confirmarPedido">CONFIRMAR PEDIDO</button>
      </div>

    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section footer-disclaimer">
        <p>CADA EXPERIENCIA, ACTIVIDAD O SERVICIO PUBLICADO EN LA PLATAFORMA ES OPERADO DIRECTAMENTE POR TERCEROS, PREVIAMENTE VERIFICADOS, Y CUENTA CON EL RESPALDO INSTITUCIONAL Y LA VALIDACIÓN DE CALIDAD DE LAS ENTIDADES TURÍSTICAS Y CULTURALES DE BARRANQUILLA Y EL DEPARTAMENTO DEL ATLÁNTICO.</p>
      </div>

      <div class="footer-section">
        <h3>LINKS DE INTERÉS</h3>
        <div class="footer-links">
          <a href="#terminos">TÉRMINOS Y CONDICIONES</a>
          <a href="#politicas">POLÍTICAS DE PRIVACIDAD</a>
        </div>
      </div>

      <div class="footer-section">
        <h3>AVALADO POR:</h3>
        <div class="footer-logos">
          <!-- Logos de entidades -->
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <p>© 2026 Puerta Caribe - Todos los derechos reservados | Barranquilla, Colombia</p>
    </div>
  </footer>

  <script src="js/script.js"></script>
  <script>
    // Lógica del carrito de compra
    const CarritoService = {
      CART_KEY: 'puertacaribe_carrito',

      getCart: function() {
        const cart = localStorage.getItem(this.CART_KEY);
        return cart ? JSON.parse(cart) : [];
      },

      saveCart: function(cart) {
        localStorage.setItem(this.CART_KEY, JSON.stringify(cart));
      },

      addItem: function(item) {
        const cart = this.getCart();
        const existingIndex = cart.findIndex(i => i.id === item.id);
        
        if (existingIndex >= 0) {
          cart[existingIndex].cantidad += 1;
        } else {
          cart.push({ ...item, cantidad: 1 });
        }
        
        this.saveCart(cart);
        this.updateUI();
      },

      removeItem: function(itemId) {
        let cart = this.getCart();
        cart = cart.filter(i => i.id !== itemId);
        this.saveCart(cart);
        this.updateUI();
      },

      clearCart: function() {
        localStorage.removeItem(this.CART_KEY);
        this.updateUI();
      },

      getTotal: function() {
        const cart = this.getCart();
        return cart.reduce((total, item) => total + (item.precio * item.cantidad), 0);
      },

      updateUI: function() {
        const cart = this.getCart();
        const listaProductos = document.getElementById('listaProductos');
        const productosCount = document.getElementById('productosCount');
        const subtotalEl = document.getElementById('subtotal');
        const totalEl = document.getElementById('total');

        if (listaProductos) {
          if (cart.length === 0) {
            listaProductos.innerHTML = '<p class="carrito-vacio">No hay productos en el carrito</p>';
          } else {
            listaProductos.innerHTML = cart.map(item => `
              <div class="carrito-producto">
                <div class="producto-info">
                  <span class="producto-nombre">${item.nombre}</span>
                  <span class="producto-cantidad">x${item.cantidad}</span>
                </div>
                <div class="producto-precio">$${(item.precio * item.cantidad).toLocaleString()}</div>
                <button class="btn-remove-item" onclick="CarritoService.removeItem('${item.id}')">×</button>
              </div>
            `).join('');
          }
        }

        if (productosCount) {
          productosCount.textContent = `#${cart.length} PRODUCTOS ∨`;
        }

        const subtotal = this.getTotal();
        if (subtotalEl) subtotalEl.textContent = `$${subtotal.toLocaleString()}`;
        if (totalEl) totalEl.textContent = `$${subtotal.toLocaleString()}`;
      }
    };

    // Inicializar UI del carrito
    document.addEventListener('DOMContentLoaded', function() {
      CarritoService.updateUI();

      // Botón confirmar pedido
      const confirmarBtn = document.getElementById('confirmarPedido');
      if (confirmarBtn) {
        confirmarBtn.addEventListener('click', function() {
          const cart = CarritoService.getCart();
          if (cart.length === 0) {
            alert('El carrito está vacío');
            return;
          }
          
          if (!AuthService.isAuthenticated()) {
            alert('Debes iniciar sesión para confirmar tu pedido');
            window.location.href = 'perfil.html';
            return;
          }

          // Simular confirmación
          alert('¡Pedido confirmado! Te contactaremos pronto.');
          CarritoService.clearCart();
        });
      }

      // Agregar cupón
      const agregarCupon = document.getElementById('agregarCupon');
      if (agregarCupon) {
        agregarCupon.addEventListener('click', function(e) {
          e.preventDefault();
          const cupon = prompt('Ingresa tu código de cupón:');
          if (cupon) {
            alert('Cupón aplicado: ' + cupon);
          }
        });
      }

      // Cambiar dirección de entrega
      const cambiarDireccion = document.querySelector('.section-action');
      if (cambiarDireccion) {
        cambiarDireccion.addEventListener('click', function(e) {
          e.preventDefault();
          const nuevaDireccion = prompt('Ingresa tu nueva dirección de entrega:', 'CLL X#XX-XX');
          if (nuevaDireccion) {
            const direccionEl = document.getElementById('direccionEntrega');
            if (direccionEl) {
              direccionEl.textContent = nuevaDireccion;
            }
          }
        });
      }

      // Agregar tarjeta de crédito/débito
      const agregarTarjeta = document.querySelector('.btn-agregar-tarjeta');
      if (agregarTarjeta) {
        agregarTarjeta.addEventListener('click', function(e) {
          e.preventDefault();
          alert('Agregar tarjeta\n\nEsta funcionalidad estará disponible próximamente.\n\nPor ahora puedes seleccionar pago en efectivo.');
        });
      }
    });
  </script>
</body>
</html>
